// stylelint-disable selector-attribute-quotes

@import "../../config";
@import "../../functions";
@import "../../tokens/raw";
@import "../../tokens/semantic";
@import "../../tokens/semantic-colors-custom-props";
@import "../../tokens/composite";
@import "../../tokens/component";
@import "../../variables";
@import "../../variables-dark";
@import "../../maps";
@import "../../mixins";

@include describe("global $color-mode-type: data") {
  @include it("generates data attribute selectors for dark mode") {
    @include assert() {
      @include output() {
        @include color-mode(dark) {
          .element {
            color: var(--bs-primary-text-emphasis);
            background-color: var(--bs-primary-bg-subtle);
          }
        }
        @include color-mode(dark, true) {
          --custom-color: #{mix($indigo, $blue, 50%)};
        }
      }
      @include expect() {
        [data-bs-theme=dark] .element,
        :root[data-bs-theme=dark] [data-bs-theme=root] .element,
        :root[data-bs-theme=light] [data-bs-theme=root-inverted] .element {
          color: var(--bs-primary-text-emphasis);
          background-color: var(--bs-primary-bg-subtle);
        }
        [data-bs-theme=dark],
        :root[data-bs-theme=dark] [data-bs-theme=root],
        :root[data-bs-theme=light] [data-bs-theme=root-inverted] {
          --custom-color: #679cec; // OUDS mod: instead of `#3aff8`
        }
      }
    }
  }
}

@include describe("global $color-mode-type: media-query") {
  @include it("generates media queries for dark mode") {
    $color-mode-type: media-query !global;

    @include assert() {
      @include output() {
        @include color-mode(dark) {
          .element {
            color: var(--bs-primary-text-emphasis);
            background-color: var(--bs-primary-bg-subtle);
          }
        }
        @include color-mode(dark, true) {
          --custom-color: #{mix($indigo, $blue, 50%)};
        }
      }
      @include expect() {
        @media (prefers-color-scheme: dark) {
          .element {
            color: var(--bs-primary-text-emphasis);
            background-color: var(--bs-primary-bg-subtle);
          }
        }
        @media (prefers-color-scheme: dark) {
          :root {
            --custom-color: #679cec; // OUDS mod: instead of `#3aff8`
          }
        }
      }
    }

    $color-mode-type: data !global;
  }
}
