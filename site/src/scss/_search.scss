// stylelint-disable selector-class-pattern

// OUDS mod: the entire file is modified and is specific to OUDS Web

:root {
  // All available CSS vars and specific modifications for OUDS Web
  --docsearch-primary-color: var(--bs-color-content-brand-primary);
  --docsearch-text-color: var(--bs-color-content-default);
  // --docsearch-spacing
  // --docsearch-icon-stroke-width
  --docsearch-highlight-color: var(--docsearch-primary-color);
  --docsearch-muted-color: var(--bs-color-content-muted);
  // TODO: use modal tokens when available here
  --docsearch-container-background: #{rgba(#000, .5)};
  --docsearch-logo-color: var(--bs-color-content-default);
  // --docsearch-modal-width
  // --docsearch-modal-height
  --docsearch-modal-background: var(--bs-body-bg);
  --docsearch-modal-shadow: none;
  // --docsearch-searchbox-height;
  // --docsearch-searchbox-background;
  --docsearch-searchbox-focus-background: transparent;
  --docsearch-searchbox-shadow: inset 0 0 0 2px var(--docsearch-text-color);
  // --docsearch-hit-height;
  --docsearch-hit-color: var(--bs-color-content-muted);
  --docsearch-hit-active-color: var(--bs-color-content-on-action-highlighted);
  --docsearch-hit-background: transparent;
  // --docsearch-hit-shadow;
  --docsearch-key-gradient: null;
  --docsearch-key-shadow: null;
  // --docsearch-footer-height;
  --docsearch-footer-background: transparent;
  --docsearch-footer-shadow: 0 -1px var(--bs-color-border-emphasized);
}

.bd-search {
  position: relative;
  display: flex;
  align-items: center;
}

.DocSearch-Container {
  --docsearch-spacing: 20px;
  --docsearch-hit-shadow: none;
  --docsearch-muted-color: var(--docsearch-text-color);
  --docsearch-hit-color: var(--docsearch-text-color);

  position: fixed;
  z-index: 2000; // Make sure to be over all components showcased in the documentation
  cursor: auto; // Needed because of [role="button"] in Algolia search modal. Remove once https://github.com/algolia/docsearch/issues/1370 is tackled.
}

.DocSearch-Modal {
  border: var(--bs-border-width) solid var(--bs-color-border-default);
  @include border-radius(var(--bs-border-radius));
}

.DocSearch-Button {
  --docsearch-searchbox-background: transparent;

  height: auto;
  padding: 0;
  margin: 0;
  border: 0;

  &:hover {
    outline: unset;
    box-shadow: unset;

    .DocSearch-Search-Icon {
      color: var(--bs-link-hover-color);
    }
  }

  &:focus-visible {
    @include focus-visible();
    border-radius: 0; // stylelint-disable-line property-disallowed-list
  }

  .DocSearch-Search-Icon {
    color: var(--bs-color-content-default);
  }
}

.DocSearch-Button-Placeholder {
  @include visually-hidden();

  &:focus {
    outline: unset;
  }
}

.DocSearch-Search-Icon {
  width: 1.875rem;
  height: 1.875rem;
  stroke-width: 2;
}

.DocSearch-Form {
  box-shadow: var(--bs-color-border-default) 0 0 0 .125rem inset;
  @include border-radius(var(--bs-border-radius));

  &:focus-within {
    box-shadow: var(--bs-color-content-default) 0 0 0 .125rem inset;
  }
}

.DocSearch-Input:focus {
  outline: 0;
  box-shadow: none;
}

.DocSearch-Reset {
  @include border-radius(var(--bs-border-radius));

  &:focus-visible {
    @include focus-visible();
  }
}

.DocSearch-Cancel {
  color: var(--docsearch-text-color);
}

.DocSearch-Button-Keys {
  @include visually-hidden();
}

.DocSearch-Commands-Key {
  width: auto;
  height: auto;
}

// more specificity to override OUDS ul default margin
.DocSearch-Commands.DocSearch-Commands {
  margin-bottom: 0;
}

.DocSearch-Hits {
  .DocSearch-Hit-source {
    color: var(--docsearch-text-color);
  }
}

.DocSearch-MagnifierLabel {
  color: var(--docsearch-text-color);
}

.DocSearch-Hit {
  padding-top: .625rem;

  a {
    @include border-radius(var(--bs-border-radius));
  }

  mark {
    color: var(--bs-color-content-on-action-highlighted);
    background: var(--bs-color-action-highlighted);
  }

  &[aria-selected="true"] {
    a {
      background-color: var(--bs-color-action-highlighted);
    }

    mark {
      --docsearch-hit-active-color: var(--bs-color-content-default);
      text-decoration: none;
      background: var(--bs-color-action-highlighted);
    }
  }
}

.DocSearch-Hit-action-button {
  @include border-radius(var(--bs-border-radius));

  &:hover,
  &:focus {
    background: transparent;

    path {
      fill: var(--bs-color-content-on-action-highlighted);
    }
  }
}

.DocSearch-Prefill {
  color: var(--bs-color-content-default);
  text-decoration: underline;
  @include border-radius(var(--bs-border-radius));

  &:hover {
    color: var(--docsearch-highlight-color);
  }

  &:focus-visible {
    @include focus-visible();
  }
}

// Fix --docsearch-logo-color that doesn't do anything
.DocSearch-Logo svg .cls-1,
.DocSearch-Logo svg .cls-2 {
  fill: var(--docsearch-logo-color);
}
// End mod
